# $Id$
# Makefile for libaiff
CC = @CC@
RANLIB = @RANLIB@
AR = ar
CFLAGS = @DEFS@ -I. -Ilibaiff -g -O2 -ansi -pedantic -Wall -Wextra -Wfloat-equal -Wshadow -Wpointer-arith -Wbad-function-cast -Wcast-align -Wwrite-strings -Wsign-compare -Wno-discard-qual -Waggregate-return -Wstrict-prototypes -Wmissing-prototypes -Wmissing-declarations -Wmissing-field-initializers -Wredundant-decls -Wnested-externs -Wno-unreachable-code

prefix = @prefix@

objs = iff.o aifx.o lpcm.o ulaw.o alaw.o libaiff.o extended.o

all: libaiff.a

install: libaiff.a
	cp libaiff.a $(prefix)/lib
	# some operating systems require this 
	$(RANLIB) $(prefix)/lib/libaiff.a
	chmod 0444 $(prefix)/lib/libaiff.a
	cp -R ./libaiff $(prefix)/include/libaiff
	chmod 0755 $(prefix)/include/libaiff
	chmod 0444 $(prefix)/include/libaiff/*
	rm -f $(prefix)/include/libaiff/config.h.in

uninstall: deinstall

deinstall:
	rm -f $(prefix)/lib/libaiff.a
	rm -rf $(prefix)/include/libaiff

libaiff.a: $(objs)
	@echo "#	creating $@"
	$(AR) cru $@ $(objs)
	$(RANLIB) $@

clean:
	rm -f *.o libaiff.a

cleanconfig:
	rm -f config.log config.status libaiff/config.h Makefile

cleanall: clean cleanconfig

.c.o:
	@echo "#	compiling $@"
	$(CC) $(CFLAGS) -c $< -o $@


